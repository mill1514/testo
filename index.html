<!DOCTYPE html>
<html lang = "en">
<head>
	<meta charset="UTF-8">
	<title>Canvas</title>
	<center>
	<style type="text/css">
		canvas{
			border: 1px solid black;
		}

		body{
			margin : 15px;
		}
	</style>
	</center>
</head>
<body>
	<canvas></canvas>
	<script src="canvas.js"></script>
	
	
	
	<script src="https://www.gstatic.com/firebasejs/4.6.2/firebase.js"></script>
<script>
  // Initialize Firebase
  var config = {
    apiKey: "AIzaSyD3cGPVywJtRnm4vQMtwRM9DVQloAmyCso",
    authDomain: "boiler-canvas.firebaseapp.com",
    databaseURL: "https://boiler-canvas.firebaseio.com",
    projectId: "boiler-canvas",
    storageBucket: "boiler-canvas.appspot.com",
    messagingSenderId: "985213101820"
  };
  firebase.initializeApp(config);
 
  var database = firebase.database();
  var x_max = 400;
  var y_max = 440;
	
  function getCanvas() {  
	  return firebase.database().ref("map/").once('value');
  }

  function setCanvas(canv) {
	  
	  /* Set the canvas as the given string */
  	firebase.database().ref("map/").set({
		pixels: canv
  	});
  }
	
  function setPixel(x, y, val) {
	  
	  /* Get index of pixel to be changed */
  	var index = (x_max * y) + x - 1;
	  
	  /* Get current canvas */
	var currCanv = getCanvas();
	  
	  /* Change the pixel */
	currCanv[index] = val;
	  
	  /* Set canvas to updated canvas */
	setCanvas(currCanv);
  }
	
  alert(getCanvas());
	
</script>
	
</body>

</html>
